(this.webpackJsonpgrades=this.webpackJsonpgrades||[]).push([[0],{168:function(e,t){},199:function(e,t,a){e.exports=a(352)},204:function(e,t,a){},205:function(e,t,a){},339:function(e,t){},340:function(e,t){},352:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(33),l=a.n(c),o=(a(204),a(8)),i=(a(205),a(39)),s=a(181),u=a(355),d=a(51),m=a(48),f=a(12),p=a(357),h=a(353),y=a(359),g=function(e,t,a){return e&&!t?1:!e&&t?-1:e||t?e[a].localeCompare(t[a]):0},E=function(e,t){return{onFilter:function(a,n){return t?t.referencedPropertyName?n[e][t.referencedPropertyName].toLowerCase().indexOf(a.toString().toLowerCase())>=0:!!t.customFilter&&t.customFilter(a,n):n[e].toLowerCase().indexOf(a.toString().toLowerCase())>=0},filterIcon:function(e){return r.a.createElement(y.a,{style:{color:e?"#1890ff":void 0}})},filterDropdown:function(e){var t=e.setSelectedKeys,a=e.selectedKeys,n=e.confirm,c=e.clearFilters;return r.a.createElement("div",{style:{padding:8}},r.a.createElement(p.a,{placeholder:"search",value:a[0],onChange:function(e){return t(e.target.value?[e.target.value]:[])},onPressEnter:n,style:{width:188,marginBottom:8,display:"block"}}),r.a.createElement(m.a,{type:"primary",onClick:n,icon:r.a.createElement(y.a,null),size:"small",style:{width:90,marginRight:8}},"Search"),r.a.createElement(m.a,{onClick:c,size:"small",style:{width:90}},"Reset"))}}},v=function(e){return r.a.createElement("div",{className:"table-wrapper"},r.a.createElement(h.a,{dataSource:e.data,columns:e.columns,pagination:e.pagination,footer:e.footer,onRow:e.onRow,loading:e.loading}))},I=a(70),b=function(){return r.a.createElement(I.a,{description:"You don't have permission to view this page"})},S=["admin"],N=function(e){var t=r.a.useContext(Ie).user,a=null===t||void 0===t?void 0:t.role.type,n=r.a.useState(),c=Object(o.a)(n,2),l=c[0],i=c[1];return r.a.useEffect((function(){fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:"\n        query {\n            users {\n                firstName\n                lastName\n                middleInitial\n                email\n                role\n            }\n        }\n        "})}).then((function(e){return e.json()})).then((function(e){i(e.data.users)})).catch((function(e){return console.log(e)}))}),[]),a&&S.includes(a)?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Users"),r.a.createElement(v,{data:l,columns:[Object(d.a)({title:"Name",dataIndex:"lastName",key:"fullName",render:function(e,t){var a="".concat(e,", ").concat(t.firstName);return t.middleInitial&&(a=a.concat(" ".concat(t.middleInitial,"."))),a},sorter:function(e,t){if(e&&!t)return 1;if(!e&&t)return-1;if(!e&&!t)return 0;var a="".concat(e.lastName,", ").concat(e.firstName),n="".concat(t.lastName,", ").concat(t.firstName);return a.localeCompare(n)}},E("lastName",{customFilter:function(e,t){return"".concat(t.lastName,", ").concat(t.firstName).toLowerCase().indexOf(e.toLowerCase())>=0}})),Object(d.a)({title:"Username",dataIndex:"email",key:"email",sorter:function(e,t){return g(e,t,"email")}},E("email")),Object(d.a)({title:"Role",dataIndex:"role",key:"role",render:function(e){return e.type},sorter:!0},E("lastName",{customFilter:function(e,t){return"".concat(t.role.type,", ").concat(t.role.type).toLowerCase().indexOf(e.toLowerCase())>=0}}))],footer:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.b,{to:"/addUser",style:{display:"block"}},r.a.createElement(m.a,{type:"primary"},"Add User")))}})):r.a.createElement(b,null)},j=a(354),w=a(358),O=a(130),C=function(e){return"".concat(e,"-").concat(Date.now(),"-").concat((100*Math.random()).toString())},x=function(e,t,a){return"".concat(a).concat(t.charAt(1)).concat(e).toLowerCase()},q=function(){return Math.random().toString(36).slice(2)},k=function(e){switch(e){case"1":return"1st";case"2":return"2nd";case"3":return"3rd";case"4":return"4th";default:return""}},T=["admin"],$=function(e){var t=r.a.useContext(Ie).user,a=null===t||void 0===t?void 0:t.role.type,n=r.a.useState(),c=Object(o.a)(n,2),l=c[0],i=c[1],s=r.a.useState(),u=Object(o.a)(s,2),d=u[0],h=u[1],y=r.a.useState(),g=Object(o.a)(y,2),E=g[0],v=g[1],I=r.a.useState(),S=Object(o.a)(I,2),N=S[0],x=S[1],q=r.a.useState(),k=Object(o.a)(q,2),$=k[0],P=k[1],A=r.a.useState(),F=Object(o.a)(A,2),G=F[0],U=F[1],L=r.a.useState(),B=Object(o.a)(L,2),J=B[0],R=B[1],W=j.a.useForm(),Q=Object(o.a)(W,1)[0],_={wrapperCol:{offset:8,span:16}},M=function(e){var t=e.firstName,a=e.lastName,n=e.middleInitial,r=e.email,c=e.password,l=e.role,o={id:C("user"),firstName:t,lastName:a,middleInitial:n,email:r,password:c,role:l};fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:"\n            mutation($id: String!, $firstName: String!, $lastName: String!, $middleInitial: String, $email: String!, $password: String!, $role: Object!) {\n                addUser(id: $id, firstName: $firstName, lastName: $lastName, middleInitial: $middleInitial, email: $email, password: $password, role: $role) {\n                    firstName,\n                    lastName,\n                    middleInitial,\n                    email,\n                    role\n                }\n            }\n        ",variables:o})}).then((function(e){return e.json()})).then((function(e){w.b.success("User successfully added",5),Q.resetFields()})).catch((function(e){return console.log(e)}))};return a&&T.includes(a)?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,Object.assign({},{labelCol:{span:4},wrapperCol:{span:20}},{form:Q,onFinish:function(e){var t=function(e,t){var a={isValid:!1};return e!==t?a.errMessage="Passwords don't match!":e.length<8||!/[`!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/.test(e)?a.errMessage="Password must be at least 8 characters and contain a special character":a.isValid=!0,a}(e.password,e.confirmPassword);if(t.isValid){var a={type:e.role};M({firstName:e.firstName,lastName:e.lastName,middleInitial:e.middleInitial,email:e.email,password:e.password,role:a})}else w.b.error(t.errMessage,5)}}),r.a.createElement(j.a.Item,{label:"First Name",name:"firstName",rules:[{required:!0,message:"Please input first name!"}]},r.a.createElement(p.a,{value:l,onChange:function(e){return i(e.target.value)}})),r.a.createElement(j.a.Item,{label:"Last Name",name:"lastName",rules:[{required:!0,message:"Please input last name!"}]},r.a.createElement(p.a,{value:d,onChange:function(e){return h(e.target.value)}})),r.a.createElement(j.a.Item,{label:"Middle Initial",name:"middleInitial"},r.a.createElement(p.a,{value:E,onChange:function(e){return v(e.target.value)}})),r.a.createElement(j.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input email!"}]},r.a.createElement(p.a,{value:N,onChange:function(e){return x(e.target.value)}})),r.a.createElement(j.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input password!"}]},r.a.createElement(p.a.Password,{value:$,onChange:function(e){return P(e.target.value)}})),r.a.createElement(j.a.Item,{label:"Confirm Password",name:"confirmPassword",rules:[{required:!0,message:"Please input confirm password!"}]},r.a.createElement(p.a.Password,{value:G,onChange:function(e){return U(e.target.value)}})),r.a.createElement(j.a.Item,{label:"Role",name:"role",rules:[{required:!0,message:"Please choose a role!"}]},r.a.createElement(O.a.Group,{optionType:"button",value:J,onChange:function(e){return R(e.target.value)}},r.a.createElement(O.a.Button,{value:"admin"},"ADMIN"),r.a.createElement(O.a.Button,{value:"schoolAdmin"},"SCHOOL ADMIN"),r.a.createElement(O.a.Button,{value:"teacher"},"TEACHER"),r.a.createElement(O.a.Button,{value:"student"},"STUDENT"))),r.a.createElement(j.a.Item,_,r.a.createElement(m.a,{type:"primary",htmlType:"submit",style:{marginBottom:"10px"},block:!0},"Add User"),r.a.createElement(f.b,{to:"/users",style:{display:"block"}},r.a.createElement(m.a,{block:!0},"Back To Users"))))):r.a.createElement(b,null)},P=a(63),A=a(36),F=["admin","schoolAdmin"],G=function(e){var t=r.a.useContext(Ie).user,a=null===t||void 0===t?void 0:t.role.type,n=r.a.useState([]),c=Object(o.a)(n,2),l=c[0],i=c[1],s=r.a.useState("all"),u=Object(o.a)(s,2),d=u[0];u[1];r.a.useEffect((function(){if(t){fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:"\n                query {\n                    sections {\n                        id\n                        name\n                        adviserId {\n                            id\n                            firstName\n                            lastName\n                        }\n                    }\n                }\n            "})}).then((function(e){return e.json()})).then((function(e){i(e.data.sections)})).catch((function(e){return console.log(e)}))}}),[]);var p=[];if("mine"==d){var h=A.filter(l,(function(e){return e.adviserId.id==(null===t||void 0===t?void 0:t.id)}));p=Object(P.a)(h)}else"all"==d&&l&&(p=Object(P.a)(l));return a&&F.includes(a)?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Sections"),r.a.createElement(v,{data:p,columns:[{title:"Name",dataIndex:"name",key:"name",render:function(e,t){return r.a.createElement(f.b,{to:"/section?id=".concat(t.id)},"".concat(e))}},{title:"Adviser",dataIndex:"adviserId",key:"adviserId",render:function(e){return e?"".concat(e.lastName,", ").concat(e.firstName):null}},{title:"Student List",dataIndex:"id",key:"studentList",render:function(e){return r.a.createElement(f.b,{to:"/section?id=".concat(e)},r.a.createElement(m.a,null,"Students"))}},{title:"Class List",dataIndex:"id",key:"classList",render:function(e){return r.a.createElement(f.b,{to:"/classes?sectionId=".concat(e)},r.a.createElement(m.a,null,"Classes"))}}],footer:function(e){return r.a.createElement(f.b,{to:"/addSection",style:{display:"block"}},r.a.createElement(m.a,{type:"primary"},"Add Section"))}}),r.a.createElement("div",null)):r.a.createElement(b,null)},U=a(22),L=a.n(U),B=a(41),J=a(85),R=a(106),W=a(360),Q=a(47),_=a(356),M=function(e){return r.a.createElement(_.a,{visible:e.visible,footer:[r.a.createElement(m.a,{key:"cancel",onClick:e.onCancel},"Cancel"),r.a.createElement(m.a,{key:"confirm",type:"primary",onClick:e.onConfirm},"Confirm")],onCancel:e.onCancel},r.a.createElement("span",null,"Are you sure? This action is final."))},D=["admin","schoolAdmin"],V=function(){var e=r.a.useContext(Ie).user,t=null===e||void 0===e?void 0:e.role.type,a=r.a.useState(),n=Object(o.a)(a,2),c=n[0],l=n[1],i=r.a.useState(""),s=Object(o.a)(i,2),u=s[0],d=s[1],h=r.a.useState(""),y=Object(o.a)(h,2),g=y[0],E=y[1],I=r.a.useState([]),S=Object(o.a)(I,2),N=S[0],O=S[1],k=r.a.useState(!1),T=Object(o.a)(k,2),$=T[0],F=T[1],G=r.a.useState(!1),U=Object(o.a)(G,2),_=U[0],V=U[1];r.a.useEffect((function(){if("teacher"==(null===e||void 0===e?void 0:e.role.type)){var t=[];t.push(e),l(t)}else fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:'\n        query {\n            users(filter: {role: {type: "teacher"}}) {\n                id\n                firstName\n                lastName\n                middleInitial\n                email\n                role\n            }\n        }\n        '})}).then((function(e){return e.json()})).then((function(e){l(A.sortBy(e.data.users,"lastName"))})).catch((function(e){return console.log(e)}))}),[]);var z=function(e){var t=C("student"),a=e.name.split(","),n=a[0],r=a[1],c=r.slice(1,r.length-3);return{id:t,firstName:c,lastName:n,middleInitial:r.charAt(r.length-2),email:x(e.index,c,n),password:q(),role:{type:"student",lrn:e.lrn.toString()}}},K=function(){var e=Object(B.a)(L.a.mark((function e(t,a){var n,r,c;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=Object(B.a)(L.a.mark((function e(){var n,r,c,l;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=C("section"),r=t.name,c=t.adviserId,l={id:n,name:r,adviserId:c,students:a},"\n                mutation($id: String!, $name: String!, $adviserId: String!, $students: [UserInput!]!) {\n                    addSection(id: $id, name: $name, adviserId: $adviserId, students: $students) {\n                        name\n                    }\n                }\n                ",fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:"\n                mutation($id: String!, $name: String!, $adviserId: String!, $students: [UserInput!]!) {\n                    addSection(id: $id, name: $name, adviserId: $adviserId, students: $students) {\n                        name\n                    }\n                }\n                ",variables:l})}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){return console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=3,n();case 3:F(!1),w.b.success("Section and students are succesfully added",5),r=Q.utils.json_to_sheet(Object(P.a)(a)),c=Q.utils.book_new(),Q.utils.book_append_sheet(c,r,"Students"),Q.writeFile(c,"".concat(t.name,"-generated.xlsx"));case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return t&&D.includes(t)?r.a.createElement(r.a.Fragment,null,r.a.createElement(f.b,{to:"/sections"},r.a.createElement(m.a,{icon:r.a.createElement(W.a,null)},"Return To Sections")),r.a.createElement("h1",null,"Add A Section"),r.a.createElement(j.a,Object.assign({onFinish:function(){return F(!0)}},{labelCol:{span:3},wrapperCol:{span:21}}),r.a.createElement(j.a.Item,{label:"Section Name",name:"sectionName",rules:[{required:!0,message:"Please input a section name!"}]},r.a.createElement(p.a,{value:u,onChange:function(e){return d(e.target.value)}})),r.a.createElement(j.a.Item,{label:"Adviser",name:"adviser",rules:[{required:!0,message:"Please choose an adviser!"}]},r.a.createElement(R.a,{onChange:function(e){return E(e)}},A.map(c,(function(e){return r.a.createElement(R.a.Option,{value:e.id,key:e.id},"".concat(e.lastName,", ").concat(e.firstName," ").concat(e.middleInitial))})))),r.a.createElement(j.a.Item,{name:"upload",label:"Upload",valuePropName:"fileList",getValueFromEvent:function(e){if(e&&e.target&&e.target.files)return e.target.files[0]},rules:[{required:!0,message:"Please upload a section file!"}]},r.a.createElement("input",{type:"file",id:"sectionFileUpload",name:"sectionFileUpload",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",onChange:function(e){V(!0),function(e){var t=e.target.files[0],a=new FileReader;a.onload=function(e){if(e&&e.target&&e.target.result){var t,a=e.target.result,n=Q.read(a,{type:"binary"}),r=n.SheetNames[0],c=n.Sheets[r],l=Q.utils.sheet_to_json(c,{blankrows:!1}),o=A.filter(l,(function(e){if(e.index)return e})),i=!0,s=[],u=Object(J.a)(o);try{for(u.s();!(t=u.n()).done;){var d=t.value;if(d.name&&d.lrn){var m=z(d);s.push(m)}else i=!1}}catch(f){u.e(f)}finally{u.f()}i?O(s):w.b.error("Some student fields are not filled in. Please complete the Excel sheet before uploading!",6),V(!1)}},a.readAsBinaryString(t)}(e)}})),r.a.createElement("h2",null,"Students Preview:"),r.a.createElement(v,{loading:_,data:N,columns:[{title:"Name",dataIndex:"lastName",key:"fullName",render:function(e,t){var a="".concat(e,", ").concat(t.firstName);return t.middleInitial&&(a=a.concat(" ".concat(t.middleInitial,"."))),a}},{title:"Email",dataIndex:"email",key:"email"},{title:"LRN",dataIndex:"role",key:"lrn",render:function(e){return e.lrn}},{title:"Password",dataIndex:"password",key:"password",render:function(e){return e}}]}),r.a.createElement(j.a.Item,null,r.a.createElement(m.a,{type:"primary",htmlType:"submit",style:{marginBottom:"10px"}},"Upload To Database"),r.a.createElement("br",null),r.a.createElement(f.b,{to:"/sections"},r.a.createElement(m.a,{icon:r.a.createElement(W.a,null)},"Return To Sections")))),r.a.createElement(M,{visible:$,onConfirm:Object(B.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({name:u,adviserId:g},N);case 2:case"end":return e.stop()}}),e)}))),onCancel:function(){return F(!1)}})):r.a.createElement(b,null)},z=["admin","schoolAdmin"],K=function(e){var t=r.a.useContext(Ie).user,a=null===t||void 0===t?void 0:t.role.type,n=r.a.useState(),c=Object(o.a)(n,2),l=c[0],i=c[1];return r.a.useEffect((function(){fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:'\n        query {\n            users(filter: {role: {type: "teacher"}}){\n                id\n                firstName\n                lastName\n                email\n                password\n                role\n              }\n        }\n        '})}).then((function(e){return e.json()})).then((function(e){i(e.data.users)})).catch((function(e){return console.log(e)}))}),[]),a&&z.includes(a)?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Teachers"),r.a.createElement(v,{data:l,columns:[{title:"Name",dataIndex:"lastName",key:"fullName",render:function(e,t){var a="".concat(e,", ").concat(t.firstName);return t.middleInitial&&(a=a.concat(" ".concat(t.middleInitial,"."))),a}},{title:"Username",dataIndex:"email",key:"email"}],footer:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.b,{to:"/addTeacher",style:{display:"block"}},r.a.createElement(m.a,{type:"primary"},"Add Teachers")))}})):r.a.createElement(b,null)},H=["admin","schoolAdmin"],Y=function(){var e=r.a.useContext(Ie).user,t=null===e||void 0===e?void 0:e.role.type,a=r.a.useState([]),n=Object(o.a)(a,2),c=n[0],l=n[1],i=r.a.useState(!1),s=Object(o.a)(i,2),u=s[0],p=s[1],h=function(e){for(var t=C("teacher"),a=e.name.split(","),n=a[0],r=a[1].trim().split(" "),c="",l=0;l<r.length-1;l++)c=c.concat(" ".concat(r[l]));return{id:t,firstName:c,lastName:n,middleInitial:r[r.length-1],email:x(e.index,c,n),password:q(),role:{type:"teacher",indexInSheet:e.index}}},y=function(){var e=Object(B.a)(L.a.mark((function e(t){var a,n,r,c,l,o,i,s,u;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=Object(P.a)(t),r=Object(J.a)(n);try{for(r.s();!(c=r.n()).done;)l=c.value,delete(o=Object(d.a)({},l)).role.indexInSheet,a.push(o)}catch(m){r.e(m)}finally{r.f()}return i=function(){var e=Object(B.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"\n                mutation($users: [UserInput!]!) {\n                    addUsers(users: $users) {\n                        firstName\n                        lastName\n                        email\n                    }\n                }\n                ",fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:"\n                mutation($users: [UserInput!]!) {\n                    addUsers(users: $users) {\n                        firstName\n                        lastName\n                        email\n                    }\n                }\n                ",variables:{users:a}})}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=7,i();case 7:p(!1),w.b.success("Teachers are succesfully added",5),s=Q.utils.json_to_sheet(Object(P.a)(t)),u=Q.utils.book_new(),Q.utils.book_append_sheet(u,s,"Teachers"),Q.writeFile(u,"Teachers-generated.xlsx");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t&&H.includes(t)?r.a.createElement(r.a.Fragment,null,r.a.createElement(f.b,{to:"/teachers"},r.a.createElement(m.a,{icon:r.a.createElement(W.a,null)},"Return To Teachers")),r.a.createElement("h1",null,"Upload Teachers"),r.a.createElement(j.a,Object.assign({onFinish:function(){return p(!0)}},{labelCol:{span:3},wrapperCol:{span:21}}),r.a.createElement(j.a.Item,{name:"upload",label:"Upload",valuePropName:"fileList",getValueFromEvent:function(e){if(e&&e.target&&e.target.files)return e.target.files[0]},rules:[{required:!0,message:"Please upload a teachers file!"}]},r.a.createElement("input",{type:"file",id:"teachersFileUpload",name:"teachersFileUpload",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",onChange:function(e){var t=e.target.files[0],a=new FileReader;a.onload=function(e){if(e&&e.target&&e.target.result){var t,a=e.target.result,n=Q.read(a,{type:"binary"}),r=n.SheetNames[0],c=n.Sheets[r],o=Q.utils.sheet_to_json(c,{blankrows:!1}),i=A.filter(o,(function(e){if(e.index)return e})),s=!0,u=[],d=Object(J.a)(i);try{for(d.s();!(t=d.n()).done;){var m=t.value;if(m.index&&m.name){var f=h(m);u.push(f)}else s=!1}}catch(p){d.e(p)}finally{d.f()}s?l(u):w.b.error("Some teacher fields are not filled in. Please complete the Excel sheet before uploading!",6)}},a.readAsBinaryString(t)}})),r.a.createElement("h2",null,"Teachers Preview:"),r.a.createElement(v,{data:c,pagination:{pageSize:50},columns:[{title:"Index",dataIndex:"role",key:"index",render:function(e){return e.indexInSheet},width:50},{title:"Name",dataIndex:"lastName",key:"fullName",render:function(e,t){var a="".concat(e,", ").concat(t.firstName);return t.middleInitial&&(a=a.concat(" ".concat(t.middleInitial))),a},width:300},{title:"Username",dataIndex:"email",key:"email"},{title:"Password",dataIndex:"password",key:"password"}]}),r.a.createElement(j.a.Item,null,r.a.createElement(m.a,{type:"primary",htmlType:"submit",style:{marginBottom:"10px"}},"Upload To Database"),r.a.createElement("br",null),r.a.createElement(f.b,{to:"/teachers"},r.a.createElement(m.a,{icon:r.a.createElement(W.a,null)},"Return To Teachers")))),r.a.createElement(M,{visible:u,onConfirm:Object(B.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(c);case 2:case"end":return e.stop()}}),e)}))),onCancel:function(){return p(!1)}})):r.a.createElement(b,null)},X={labelCol:{span:4},wrapperCol:{span:20}},Z={wrapperCol:{offset:4,span:20}},ee=function(){var e=r.a.useContext(Ie).user,t=Object(i.f)(),a=r.a.useState(),n=Object(o.a)(a,2),c=n[0],l=n[1],s=r.a.useState(),u=Object(o.a)(s,2),d=u[0],f=u[1];r.a.useEffect((function(){e&&t.push("/")}),[e,t]);var h=function(){var e=Object(B.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"\n        mutation($email: String!, $password: String!) {\n            login(email: $email, password: $password) {\n                email\n                password\n            }\n        }\n        ",t={email:c,password:d},fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:"\n        mutation($email: String!, $password: String!) {\n            login(email: $email, password: $password) {\n                email\n                password\n            }\n        }\n        ",variables:t})}).then((function(e){return e.json()})).then((function(e){e.errors&&w.b.error(e.errors[0].message,7),e&&e.data&&e.data.login&&window.location.reload()}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,Object.assign({},X,{style:{width:"100%",maxWidth:"500px",margin:"0 auto"},onFinish:h}),r.a.createElement("h1",null,"Login"),r.a.createElement(j.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}]},r.a.createElement(p.a,{onChange:function(e){return l(e.target.value)}})),r.a.createElement(j.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(p.a.Password,{onChange:function(e){return f(e.target.value)}})),r.a.createElement(j.a.Item,Z,r.a.createElement(m.a,{type:"primary",htmlType:"submit",className:"form-submit"},"Submit"))))},te=["admin","schoolAdmin","teacher"],ae=function(e){var t=r.a.useContext(Ie).user,a=null===t||void 0===t?void 0:t.role.type,n=r.a.useState(),c=Object(o.a)(n,2),l=c[0],i=c[1],s=r.a.useState(),u=Object(o.a)(s,2),d=u[0],p=u[1];return r.a.useEffect((function(){var t=new URLSearchParams(e.location.search).get("id");fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:"\n        query($id: String!) {\n            section(id: $id) {\n                id\n                name\n            }\n        }\n        ",variables:{id:t}})}).then((function(e){return e.json()})).then((function(e){i(e.data.section)})).catch((function(e){return console.log(e)}));fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:"\n        query($id: String!) {\n            studentsBySectionId(id: $id) {\n                id\n                firstName\n                lastName\n                middleInitial\n            }\n        }\n        ",variables:{id:t}})}).then((function(e){return e.json()})).then((function(e){p(e.data.studentsBySectionId)})).catch((function(e){return console.log(e)}))}),[]),a&&te.includes(a)?r.a.createElement(r.a.Fragment,null,r.a.createElement(f.b,{to:"/sections"},r.a.createElement(m.a,{icon:r.a.createElement(W.a,null)},"Return To Sections")),r.a.createElement("h1",null,null===l||void 0===l?void 0:l.name),r.a.createElement(v,{data:d,columns:[{title:"",dataIndex:"id",key:"id",render:function(e,t,a){return a+1}},{title:"Last Name",dataIndex:"lastName",key:"lastName"},{title:"First Name",dataIndex:"firstName",key:"firstName"},{title:"Middle Initial",dataIndex:"middleInitial",key:"middleInitial"}]})):r.a.createElement(b,null)},ne=["admin","schoolAdmin","teacher"],re=function(e){var t,a,n=r.a.useContext(Ie).user,c=null===n||void 0===n?void 0:n.role.type,l=r.a.useState(),i=Object(o.a)(l,2),s=i[0],u=i[1],d=r.a.useState(""),p=Object(o.a)(d,2),h=p[0],y=p[1],g=r.a.useState(),E=Object(o.a)(g,2),I=E[0],S=E[1],N=r.a.useState(!1),j=Object(o.a)(N,2),w=j[0],O=j[1],C=new URLSearchParams(e.location.search),x=C.get("classId"),q=C.get("quarter");r.a.useEffect((function(){O(!0);fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:"\n        query($id: String!) {\n            class(id: $id) {\n                id\n                name\n                teacherId {\n                    id\n                    firstName\n                    lastName\n                }\n                sectionId {\n                    id\n                    name\n                }\n            }\n        }\n        ",variables:{id:x}})}).then((function(e){return e.json()})).then((function(e){u(e.data.class)})).catch((function(e){return console.log(e)}));fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:"\n            query($classId: String!, $quarter: Int) {\n                gradesByClassId(classId: $classId, quarter: $quarter) {\n                    id\n                    studentId {\n                        firstName\n                        lastName\n                        middleInitial\n                    }\n                    scores\n                    quarter\n                }\n            }\n            ",variables:{classId:x,quarter:parseInt(q)}})}).then((function(e){return e.json()})).then((function(e){S(e.data.gradesByClassId),O(!1)})).catch((function(e){console.log(e),O(!1)})),y(k(q))}),[]);var T=function(){var e=!1;return("admin"==(null===n||void 0===n?void 0:n.role.type)||"schoolAdmin"==(null===n||void 0===n?void 0:n.role.type)||(null===s||void 0===s?void 0:s.teacherId.id)==(null===n||void 0===n?void 0:n.id))&&(e=!0),e};return c&&ne.includes(c)?r.a.createElement(r.a.Fragment,null,r.a.createElement(f.b,{to:"/classes?sectionId=".concat(null===s||void 0===s||null===(t=s.sectionId)||void 0===t?void 0:t.id)},r.a.createElement(m.a,{icon:r.a.createElement(W.a,null)},"Return To Classes")),r.a.createElement("h1",null,"".concat(h," Quarter - ").concat(null===s||void 0===s?void 0:s.name," - ").concat(null===s||void 0===s||null===(a=s.sectionId)||void 0===a?void 0:a.name)),r.a.createElement(v,{loading:w,data:I,columns:[{title:"",dataIndex:"studentId",key:"index",render:function(e,t,a){return a+1}},{title:"Student",key:"student",dataIndex:"studentId",render:function(e){return e?"".concat(e.lastName,", ").concat(e.firstName," ").concat(e.middleInitial,"."):null}},{title:"Written Works",dataIndex:["scores","ww"],key:"Written Works",render:function(e,t){return"".concat(e," / ").concat(t.scores.wwTotal)}},{title:"Performance Task",dataIndex:["scores","pt"],key:"Performance Task",render:function(e,t){return"".concat(e," / ").concat(t.scores.ptTotal)}},{title:"QA",dataIndex:["scores","qa"],key:"QA",render:function(e,t){return"".concat(e," / ").concat(t.scores.qaTotal)}},{title:"Initial Grade",dataIndex:["scores","initialGrade"],key:"Initial Grade"},{title:"Final Grade",dataIndex:["scores","finalGrade"],key:"Final Grade"}],footer:function(e){return r.a.createElement(m.a,{type:"primary",disabled:!T()},r.a.createElement(f.b,{to:"/addGrade?classId=".concat(null===s||void 0===s?void 0:s.id,"&quarter=").concat(q),style:{display:"block"}},"Upload Grades"))}})):r.a.createElement(b,null)},ce=["admin","schoolAdmin","teacher"],le=function(e){var t,a=r.a.useContext(Ie).user,n=null===a||void 0===a?void 0:a.role.type,c=r.a.useState(),l=Object(o.a)(c,2),i=l[0],s=l[1],u=r.a.useState(""),d=Object(o.a)(u,2),p=d[0],h=d[1],y=r.a.useState([]),g=Object(o.a)(y,2),E=g[0],I=g[1],S=r.a.useState(!1),N=Object(o.a)(S,2),O=N[0],x=N[1],q=r.a.useState(),T=Object(o.a)(q,2),$=T[0],P=T[1],F=r.a.useState(!1),G=Object(o.a)(F,2),U=G[0],R=G[1],_=new URLSearchParams(e.location.search),D=_.get("classId"),V=_.get("quarter");r.a.useEffect((function(){fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:"\n        query($id: String!) {\n            studentsByClassId(id: $id) {\n                id\n                firstName\n                lastName\n                middleInitial\n                email\n                role\n            }\n        }\n        ",variables:{id:D}})}).then((function(e){return e.json()})).then((function(e){P(e.data.studentsByClassId)})).catch((function(e){return console.log(e)}));fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:"\n        query($id: String!) {\n            class(id: $id) {\n                id\n                name\n                teacherId {\n                    firstName\n                    lastName\n                }\n                sectionId {\n                    id\n                    name\n                }\n            }\n        }\n        ",variables:{id:D}})}).then((function(e){return e.json()})).then((function(e){s(e.data.class)})).catch((function(e){return console.log(e)})),h(k(V))}),[]);var z=function(e){return{id:C("grade"),studentId:function(e){var t=A.find($,(function(t){return t.role.lrn==e}));return t?t.id:""}(e.lrn),scores:function(e){return{ww:e.WW,wwTotal:e["WW-total"],pt:e.PT,ptTotal:e["PT-total"],qa:e.QA,qaTotal:e["QA-total"],initialGrade:e.initial,finalGrade:e.final}}(e),classId:D||"",quarter:V?parseInt(V):0}},K=function(){var e=Object(B.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){var e=Object(B.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"\n                mutation($grades: [GradeInput!]!, $quarter: Int!) {\n                    addGrades(grades: $grades, quarter: $quarter) {\n                        id\n                    }\n                }\n                ",fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:"\n                mutation($grades: [GradeInput!]!, $quarter: Int!) {\n                    addGrades(grades: $grades, quarter: $quarter) {\n                        id\n                    }\n                }\n                ",variables:{grades:t,quarter:parseInt(V)}})}).then((function(e){return e.json()})).then((function(e){e.errors&&w.b.error(e.errors[0].message,7),e&&e.data&&e.data.addGrades&&w.b.success("Grades are succesfully uploaded",5)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=3,a();case 3:x(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n&&ce.includes(n)?r.a.createElement(r.a.Fragment,null,r.a.createElement(f.b,{to:"/grade?classId=".concat(D,"&quarter=").concat(V)},r.a.createElement(m.a,{icon:r.a.createElement(W.a,null)},"Return To Grade")),r.a.createElement("h1",null,"".concat(p," Quarter - ").concat(null===i||void 0===i?void 0:i.name," - ").concat(null===i||void 0===i||null===(t=i.sectionId)||void 0===t?void 0:t.name)),r.a.createElement("p",{style:{color:"#f54c4c"}},"Confirming your upload will overwrite any currently saved grades in the database for this quarter."),r.a.createElement(j.a,{onFinish:function(){return x(!0)}},r.a.createElement(j.a.Item,{name:"upload",label:"Upload",valuePropName:"fileList",getValueFromEvent:function(e){if(e&&e.target&&e.target.files)return e.target.files[0]},rules:[{required:!0,message:"Please upload a grades file!"}]},r.a.createElement("input",{type:"file",id:"sectionFileUpload",name:"sectionFileUpload",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",onChange:function(e){R(!0),function(e){var t=e.target.files[0],a=new FileReader;a.onload=function(){var e=Object(B.a)(L.a.mark((function e(t){var a,n,r,c,l,o,i,s,u,d,m,f;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.target&&t.target.result){a=t.target.result,n=Q.read(a,{type:"binary"}),r=n.SheetNames[0],c=n.Sheets[r],l=Q.utils.sheet_to_json(c,{blankrows:!1}),o=A.filter(l,(function(e){if(e.lrn)return e})),i=!0,s=[],u=Object(J.a)(o);try{for(u.s();!(d=u.n()).done;)(m=d.value).lrn?(f=z(m),s.push(f)):i=!1}catch(p){u.e(p)}finally{u.f()}i?I(s):w.b.error("Some student fields are not filled in. Please complete the Excel sheet before uploading!",6),R(!1)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.readAsBinaryString(t)}(e)}})),r.a.createElement("h2",null,"Grade Preview:"),r.a.createElement(v,{loading:U,data:E,columns:[{title:"",dataIndex:"studentId",key:"index",render:function(e,t,a){return a+1}},{title:"Student",dataIndex:"studentId",key:"student",render:function(e){var t=A.find($,(function(t){return t.id==e}));return t?"".concat(t.lastName,", ").concat(t.firstName," ").concat(t.middleInitial,"."):null}},{title:"Written Works",dataIndex:["scores","ww"],key:"Written Works",render:function(e,t){return"".concat(e," / ").concat(t.scores.wwTotal)}},{title:"Performance Task",dataIndex:["scores","pt"],key:"Performance Task",render:function(e,t){return"".concat(e," / ").concat(t.scores.ptTotal)}},{title:"QA",dataIndex:["scores","qa"],key:"QA",render:function(e,t){return"".concat(e," / ").concat(t.scores.qaTotal)}},{title:"Initial Grade",dataIndex:["scores","initialGrade"],key:"Initial Grade"},{title:"Final Grade",dataIndex:["scores","finalGrade"],key:"Final Grade"}]}),r.a.createElement(j.a.Item,null,r.a.createElement(m.a,{type:"primary",htmlType:"submit",style:{marginBottom:"10px"}},"Upload To Database"),r.a.createElement("br",null))),r.a.createElement(M,{visible:O,onConfirm:Object(B.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(E);case 2:case"end":return e.stop()}}),e)}))),onCancel:function(){return x(!1)}})):r.a.createElement(b,null)},oe=["admin","schoolAdmin","teacher"],ie=function(e){var t,a,n=r.a.useContext(Ie).user,c=null===n||void 0===n?void 0:n.role.type,l=r.a.useState(),i=Object(o.a)(l,2),s=i[0],u=i[1],d=r.a.useState(),p=Object(o.a)(d,2),h=p[0],y=p[1],g=new URLSearchParams(e.location.search).get("classId");return r.a.useEffect((function(){fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:"\n        query($id: String!) {\n            class(id: $id) {\n                id\n                name\n                teacherId {\n                    id\n                    firstName\n                    lastName\n                }\n                sectionId {\n                    id\n                    name\n                }\n            }\n        }\n        ",variables:{id:g}})}).then((function(e){return e.json()})).then((function(e){u(e.data.class)})).catch((function(e){return console.log(e)}));fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:"\n            query($classId: String!) {\n                gradesByClassId(classId: $classId) {\n                    id\n                    studentId {\n                        id\n                        firstName\n                        lastName\n                        middleInitial\n                    }\n                    scores\n                    quarter\n                }\n            }\n            ",variables:{classId:g}})}).then((function(e){return e.json()})).then((function(e){y(function(e){var t=[];return A.each(e,(function(e){var a=A.find(t,(function(t){return e.studentId.id==t.student.id}));if(a)a[e.quarter]=e.scores.finalGrade;else{var n={student:e.studentId,1:0,2:0,3:0,4:0};n[e.quarter]=e.scores.finalGrade,t.push(n)}})),t}(e.data.gradesByClassId))})).catch((function(e){return console.log(e)}))}),[]),c&&oe.includes(c)?r.a.createElement(r.a.Fragment,null,r.a.createElement(f.b,{to:"/classes?sectionId=".concat(null===s||void 0===s||null===(t=s.sectionId)||void 0===t?void 0:t.id)},r.a.createElement(m.a,{icon:r.a.createElement(W.a,null)},"Return To Classes")),r.a.createElement("h1",null,"Final grades - ".concat(null===s||void 0===s?void 0:s.name," - ").concat(null===s||void 0===s||null===(a=s.sectionId)||void 0===a?void 0:a.name)),r.a.createElement(v,{data:h,columns:[{title:"",dataIndex:"student",key:"index",render:function(e,t,a){return a+1}},{title:"Student",key:"student",dataIndex:"student",render:function(e){return e?"".concat(e.lastName,", ").concat(e.firstName," ").concat(e.middleInitial,"."):null}},{title:"1st Quarter",dataIndex:"1",key:"1st-quarter"},{title:"2nd Quarter",dataIndex:"2",key:"2nd-quarter"},{title:"3rd Quarter",dataIndex:"3",key:"3rd-quarter"},{title:"4th Quarter",dataIndex:"4",key:"4th-quarter"},{title:"Final Grade",dataIndex:"student",key:"final-grade",render:function(e,t){return((a=t)[1]+a[2]+a[3]+a[4])/4;var a}}]})):r.a.createElement(b,null)},se=function(e){var t=r.a.useContext(Ie).user,a=r.a.useState(),n=Object(o.a)(a,2),c=n[0],l=n[1],i=r.a.useState(!1),s=Object(o.a)(i,2),u=s[0],d=s[1],f=r.a.useState(),h=Object(o.a)(f,2),y=h[0],g=h[1],E=r.a.useState(),v=Object(o.a)(E,2),I=v[0],b=v[1],S=r.a.useState(),N=Object(o.a)(S,2),O=N[0],x=N[1],q=r.a.useState(),k=Object(o.a)(q,2),T=k[0],$=k[1];r.a.useEffect((function(){if(t){fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:"\n            query {\n                sections {\n                    id\n                    name\n                }\n            }\n            "})}).then((function(e){return e.json()})).then((function(e){e.errors?w.b.error(e.errors[0].message,7):l(e.data.sections)})).catch((function(e){return console.log(e)}))}"admin"!=(null===t||void 0===t?void 0:t.role.type)&&"schoolAdmin"!=(null===t||void 0===t?void 0:t.role.type)||fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:'\n            query {\n                users(filter: {role: {type: "teacher"}}) {\n                    id\n                    firstName\n                    lastName\n                    middleInitial\n                    email\n                    role\n                }\n            }\n        '})}).then((function(e){return e.json()})).then((function(e){e.errors?w.b.error(e.errors[0].message,7):g(A.sortBy(e.data.users,"lastName"))})).catch((function(e){return console.log(e)})),e.sectionId&&$(e.sectionId),x(G())}),[e.sectionId]);var P={wrapperCol:{offset:4,span:20}},F=function(){var e=Object(B.a)(L.a.mark((function e(){var t,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=C("class"),a={id:t,name:I,teacherId:O,sectionId:T},"\n        mutation($id: String!, $name: String, $teacherId: String!, $sectionId: String!) {\n            addClass(id: $id, name: $name, teacherId: $teacherId, sectionId: $sectionId) {\n                id\n                name\n            }\n        }\n        ",fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:"\n        mutation($id: String!, $name: String, $teacherId: String!, $sectionId: String!) {\n            addClass(id: $id, name: $name, teacherId: $teacherId, sectionId: $sectionId) {\n                id\n                name\n            }\n        }\n        ",variables:a})}).then((function(e){return e.json()})).then((function(e){d(!1),window.location.reload()})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){return t&&t.role&&"teacher"==t.role.type?t.id:void 0};return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{visible:u,title:"Add a Class",footer:[],width:"600px",onCancel:function(){return d(!1)},maskClosable:!1},r.a.createElement(j.a,Object.assign({},{labelCol:{span:4},wrapperCol:{span:20}},{onFinish:F}),r.a.createElement(j.a.Item,{label:"Section",name:"section",rules:[{required:!0,message:"Please select a section!"}],initialValue:T},r.a.createElement(R.a,{value:T,onChange:function(e){return $(e)},placeholder:"select a section..."},A.map(c,(function(e){return r.a.createElement(R.a.Option,{value:e.id,key:e.id},e.name)})))),r.a.createElement(j.a.Item,{label:"Teacher",name:"teacher",rules:[{required:!0,message:"Please select a teacher!"}],initialValue:O},r.a.createElement(R.a,{value:O,onChange:function(e){return x(e)},placeholder:"select a teacher..."},t&&t.role&&"teacher"==t.role.type?r.a.createElement(R.a.Option,{value:t.id,key:t.id},"".concat(t.lastName,", ").concat(t.firstName," ").concat(t.middleInitial)):A.map(y,(function(e){return r.a.createElement(R.a.Option,{value:e.id,key:e.id},"".concat(e.lastName,", ").concat(e.firstName," ").concat(e.middleInitial))})))),r.a.createElement(j.a.Item,{label:"Class name",name:"className",rules:[{required:!0,message:"Please input a class name!"}]},r.a.createElement(p.a,{onChange:function(e){return b(e.target.value)},placeholder:"input a name..."})),r.a.createElement(j.a.Item,P,r.a.createElement(m.a,{type:"primary",htmlType:"submit",className:"form-submit"},"Add To Database")))),r.a.createElement(m.a,{type:"primary",onClick:function(){return d(!0)}},"Add Class"))},ue=["admin","schoolAdmin","teacher"],de=function(e){var t=r.a.useContext(Ie).user,a=null===t||void 0===t?void 0:t.role.type,n=r.a.useState([]),c=Object(o.a)(n,2),l=c[0],i=c[1],s=r.a.useState("mine"),u=Object(o.a)(s,2),p=u[0],h=u[1],y=r.a.useState(!1),I=Object(o.a)(y,2),S=I[0],N=I[1],j=new URLSearchParams(e.location.search).get("sectionId")||void 0;r.a.useEffect((function(){if(N(!0),t){fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:"\n                query {\n                    classes {\n                        id\n                        name\n                        teacherId {\n                            id\n                            firstName\n                            lastName\n                        }\n                        sectionId {\n                            id\n                            name\n                        }\n                    }\n                }\n            "})}).then((function(e){return e.json()})).then((function(e){i(e.data.classes),N(!1)})).catch((function(e){console.log(e),N(!1)}))}}),[]);var w=[];if("mine"==p){var C=A.filter(l,(function(e){return e.teacherId.id==(null===t||void 0===t?void 0:t.id)}));w=Object(P.a)(C)}else"all"==p&&(w=Object(P.a)(l));return a&&ue.includes(a)?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Classes"),r.a.createElement(O.a.Group,{onChange:function(e){return h(e.target.value)},value:p},r.a.createElement(O.a,{value:"all"},"All"),r.a.createElement(O.a,{value:"mine"},"My Classes")),r.a.createElement(v,{loading:S,data:w,columns:[Object(d.a)({title:"Name",dataIndex:"name",key:"name",sorter:function(e,t){return g(e,t,"name")}},E("name")),Object(d.a)({title:"Section",dataIndex:"sectionId",key:"section",render:function(e){return e?e.name:null},sorter:function(e,t){if(e&&!t)return 1;if(!e&&t)return-1;if(!e&&!t)return 0;var a=e.name,n=t.name;return a.localeCompare(n)}},E("sectionId",{referencedPropertyName:"name"})),Object(d.a)({title:"Teacher",dataIndex:"teacherId",key:"teacherId",render:function(e){return e?"".concat(e.lastName,", ").concat(e.firstName):null},sorter:function(e,t){if(e&&!t)return 1;if(!e&&t)return-1;if(!e&&!t)return 0;var a="".concat(e.teacherId.lastName,", ").concat(e.teacherId.firstName),n="".concat(t.teacherId.lastName,", ").concat(t.teacherId.firstName);return a.localeCompare(n)}},E("teacherId",{customFilter:function(e,t){return"".concat(t.teacherId.lastName,", ").concat(t.teacherId.firstName).toLowerCase().indexOf(e.toLowerCase())>=0}})),{title:"Grades",dataIndex:"id",key:"1st-quarter",render:function(e){return r.a.createElement(f.b,{to:"/grade?classId=".concat(e,"&quarter=1")},r.a.createElement(m.a,null,"1st Quarter"))}},{title:"",dataIndex:"id",key:"2nd-quarter",render:function(e){return r.a.createElement(f.b,{to:"/grade?classId=".concat(e,"&quarter=2")},r.a.createElement(m.a,null,"2nd Quarter"))}},{title:"",dataIndex:"id",key:"3rd-quarter",render:function(e){return r.a.createElement(f.b,{to:"/grade?classId=".concat(e,"&quarter=3")},r.a.createElement(m.a,null,"3rd Quarter"))}},{title:"",dataIndex:"id",key:"4th-quarter",render:function(e){return r.a.createElement(f.b,{to:"/grade?classId=".concat(e,"&quarter=4")},r.a.createElement(m.a,null,"4th Quarter"))}},{title:"",dataIndex:"id",key:"finale-grades",render:function(e){return r.a.createElement(f.b,{to:"/finalGrades?classId=".concat(e)},r.a.createElement(m.a,null,"Final Grades"))}}],footer:function(e){return r.a.createElement(se,{sectionId:j})}})):r.a.createElement(b,null)},me=a(87),fe=function(){var e=function(){var e=Object(B.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"\n        mutation {\n                logout\n            }\n        ",fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:"\n        mutation {\n                logout\n            }\n        "})}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(m.a,{onClick:Object(B.a)(L.a.mark((function t(){return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:window.location.reload();case 3:case"end":return t.stop()}}),t)})))},"Logout")},pe=function(){var e=r.a.useContext(Ie).user,t=r.a.useState(""),a=Object(o.a)(t,2),n=a[0],c=a[1];return r.a.createElement("div",{id:"header"},r.a.createElement(me.a,{mode:"horizontal",selectedKeys:[n],onClick:function(e){c(e.key.toString())}},e?r.a.createElement(r.a.Fragment,null,"admin"==e.role.type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(me.a.Item,{key:"sections"},r.a.createElement(f.b,{to:"/sections"},"Sections")),r.a.createElement(me.a.Item,{key:"classes"},r.a.createElement(f.b,{to:"/classes"},"Classes")),r.a.createElement(me.a.Item,{key:"teachers"},r.a.createElement(f.b,{to:"/teachers"},"Teachers")),r.a.createElement(me.a.Item,{key:"users"},r.a.createElement(f.b,{to:"/users"},"Users"))),"schoolAdmin"==e.role.type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(me.a.Item,{key:"sections"},r.a.createElement(f.b,{to:"/sections"},"Sections")),r.a.createElement(me.a.Item,{key:"teachers"},r.a.createElement(f.b,{to:"/teachers"},"Teachers"))),"teacher"==e.role.type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(me.a.Item,{key:"classes"},r.a.createElement(f.b,{to:"/classes"},"Classes"))),"student"==e.role.type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(me.a.Item,{key:"studentClasses"},r.a.createElement(f.b,{to:"/studentClasses"},"Classes")),r.a.createElement(me.a.Item,{key:"grade"},r.a.createElement(f.b,{to:"/grade"},"Grade"))),r.a.createElement(fe,null),r.a.createElement("span",{id:"welcome"},"Welcome, ".concat(e.firstName," ").concat(e.lastName,"!"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(me.a.Item,{key:"login"},r.a.createElement(f.b,{to:"/login"},"Log In")))))},he=["admin","student"],ye=function(e){var t=r.a.useContext(Ie).user,a=null===t||void 0===t?void 0:t.role.type,n=r.a.useState([]),c=Object(o.a)(n,2),l=c[0],i=c[1],s=r.a.useState(!1),u=Object(o.a)(s,2),p=u[0],h=u[1];return r.a.useEffect((function(){if(h(!0),t){var e=t.role.sectionId;fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:"\n                query($sectionId: String!) {\n                    classesBySectionId(sectionId: $sectionId) {\n                        id\n                        name\n                        teacherId {\n                            id\n                            firstName\n                            lastName\n                        }\n                    }\n                }\n            ",variables:{sectionId:e}})}).then((function(e){return e.json()})).then((function(e){i(e.data.classesBySectionId),h(!1)})).catch((function(e){console.log(e),h(!1)}))}}),[]),a&&he.includes(a)?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Classes"),r.a.createElement(v,{loading:p,data:l,columns:[Object(d.a)({title:"Name",dataIndex:"name",key:"name",sorter:function(e,t){return g(e,t,"name")}},E("name")),Object(d.a)({title:"Teacher",dataIndex:"teacherId",key:"teacherId",render:function(e){return e?"".concat(e.lastName,", ").concat(e.firstName):null},sorter:function(e,t){if(e&&!t)return 1;if(!e&&t)return-1;if(!e&&!t)return 0;var a="".concat(e.teacherId.lastName,", ").concat(e.teacherId.firstName),n="".concat(t.teacherId.lastName,", ").concat(t.teacherId.firstName);return a.localeCompare(n)}},E("teacherId",{customFilter:function(e,t){return"".concat(t.teacherId.lastName,", ").concat(t.teacherId.firstName).toLowerCase().indexOf(e.toLowerCase())>=0}})),{title:"Grades",dataIndex:"id",key:"1st-quarter",render:function(e,t){return r.a.createElement(f.b,{to:"/studentGrade?classId=".concat(e,"&class=").concat(t.name)},r.a.createElement(m.a,null,"View"))}}]})):r.a.createElement(b,null)},ge=["admin","student"],Ee=function(e){var t=r.a.useContext(Ie).user,a=null===t||void 0===t?void 0:t.role.type,n=r.a.useState(),c=Object(o.a)(n,2),l=c[0],i=c[1],s=r.a.useState(!1),u=Object(o.a)(s,2),d=u[0],p=u[1],h=new URLSearchParams(e.location.search),y=h.get("classId"),g=h.get("class");if(r.a.useEffect((function(){p(!0);fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:"\n            query($classId: String!) {\n                studentGradesByClassId(classId: $classId) {\n                    id\n                    scores\n                    quarter\n                }\n            }\n            ",variables:{classId:y}})}).then((function(e){return e.json()})).then((function(e){i(e.data.studentGradesByClassId),p(!1)})).catch((function(e){console.log(e),p(!1)}))}),[]),!a||!ge.includes(a))return r.a.createElement(b,null);var E=A.sortBy(l,"quarter");return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.b,{to:"/studentClasses"},r.a.createElement(m.a,{icon:r.a.createElement(W.a,null)},"Return To Classes")),r.a.createElement("h1",null,"".concat(g)),r.a.createElement(v,{loading:d,data:E,columns:[{title:"Quarter",key:"quarter",dataIndex:"quarter"},{title:"Written Works",dataIndex:["scores","ww"],key:"Written Works",render:function(e,t){return"".concat(e," / ").concat(t.scores.wwTotal)}},{title:"Performance Task",dataIndex:["scores","pt"],key:"Performance Task",render:function(e,t){return"".concat(e," / ").concat(t.scores.ptTotal)}},{title:"QA",dataIndex:["scores","qa"],key:"qa",render:function(e,t){return"".concat(e," / ").concat(t.scores.qaTotal)}},{title:"Initial Grade",dataIndex:["scores","initialGrade"],key:"initialGrade"},{title:"Final Grade",dataIndex:["scores","finalGrade"],key:"Final Grade"}]}),r.a.createElement("h2",null,"Final Grade: ",function(){var e=0;return l&&4==l.length?(A.forEach(l,(function(t){e+=t.scores.finalGrade})),e/4):"NA"}()))};var ve=function(){var e=Object(i.f)(),t=r.a.useState(),a=Object(o.a)(t,2),n=a[0],c=a[1],l=r.a.useState(!0),d=Object(o.a)(l,2),m=d[0],f=d[1];return r.a.useEffect((function(){fetch("".concat("http://localhost:4000","/graphql"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({query:"\n    query {\n        me {\n            id\n            firstName\n            lastName\n            middleInitial\n            email\n            role\n        }\n    }\n    "})}).then((function(e){return e.json()})).then((function(e){c(e.data.me),f(!1)})).catch((function(e){console.log(e),f(!1)}))}),[]),m?r.a.createElement("div",{className:"spin-container"},r.a.createElement(s.a,{size:"large",tip:"Loading..."})):r.a.createElement(Ie.Provider,{value:{user:n}},!n&&e.push("/login"),r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(pe,null)),r.a.createElement("div",{className:"App-body"},r.a.createElement(u.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/login",component:function(){return r.a.createElement(ee,null)}}),r.a.createElement(i.a,{path:"/sections",component:G}),r.a.createElement(i.a,{path:"/section",component:ae}),r.a.createElement(i.a,{path:"/addSection",component:V}),r.a.createElement(i.a,{path:"/classes",component:de}),r.a.createElement(i.a,{path:"/grade",component:re}),r.a.createElement(i.a,{path:"/addGrade",component:le}),r.a.createElement(i.a,{path:"/finalGrades",component:ie}),r.a.createElement(i.a,{path:"/users",component:N}),r.a.createElement(i.a,{path:"/addUser",component:$}),r.a.createElement(i.a,{path:"/teachers",component:K}),r.a.createElement(i.a,{path:"/addTeacher",component:Y}),r.a.createElement(i.a,{path:"/studentClasses",component:ye}),r.a.createElement(i.a,{path:"/studentGrade",component:Ee}),n&&"student"==n.role.type?r.a.createElement(i.a,{exact:!0,path:"/",component:ye}):r.a.createElement(i.a,{exact:!0,path:"/",component:de}))))))},Ie=r.a.createContext({user:void 0});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(351);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(f.a,null,r.a.createElement(ve,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[199,1,2]]]);
//# sourceMappingURL=main.babcf502.chunk.js.map